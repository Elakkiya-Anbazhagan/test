<div class="wrapper wrapper-content animated fadeInRight">
    <div class="panel" id="pnlist">
        <div class="panel-header">
            <h2><strong>Account Ledger</strong></h2>
        </div>
        <div class="panel-content">
            <p-treeTable [value]="LedgerList">
                <p-column field="LedgerName" header="Name"></p-column>
                <p-column field="Credit" header="Credit" [style]="{'width' : '100px'}">
                    <ng-template let-node="rowData" pTemplate="body">
                        <div style="text-align:right !important"> {{node.data.Credit | number:'1.2-2'}}</div>
                    </ng-template>
                </p-column>
                <p-column field="Debit" header="Debit" [style]="{'width' : '100px'}">
                    <ng-template let-node="rowData" pTemplate="body">
                        <div style="text-align:right !important"> {{node.data.Debit | number:'1.2-2'}}</div>
                    </ng-template>
                </p-column>
                <p-column header="Option" [style]="{'width' : '155px'}">
                    <ng-template let-node="rowData" pTemplate="body">
                        <button class="btn btn-sm btn-success" (click)="btnAdd_click(node.data)" tooltip="Add Ledger" tooltipPlacement="top" *ngIf="node.data.IsAllowSubLedger && node.data.ParentLedgerSysID !=0 && isAllowAdd"><i class="fa fa-plus-circle"></i></button>
                        <button class="btn btn-sm btn-primary" (click)="btnAddEdit_click(node.data)" tooltip="Edit Ledger" tooltipPlacement="top"
                            *ngIf="!node.data.IsMainLedger && node.data.ParentLedgerSysID !=0 && !node.data.IsAutoGenerated  && isAllowEdit"><i class="fa fa-pencil"></i></button>
                    </ng-template>
                </p-column>
            </p-treeTable>
        </div>
    </div>
</div>


<modal #mdEntry [keyboard]="false" id="mdLedgerEntry" [backdrop]="'static'" cssClass="modal-sm">
    <form #frmLedgerEntry="ngForm" (ngSubmit)="frmLedgerEntry.valid && btnSave_click()" novalidate autocomplete="off">
        <modal-header>
            <h1 class="modal-title"> <strong>Account Ledger </strong>({{frmLedgerEntry.LedgerName}})</h1>
        </modal-header>
        <modal-body class="error-style">
            <div class="row">
                <div class="form-group col-md-6">
                    <label class="control-label">Parent Ledger</label>
                    <input type="text" class="form-control" [disabled]="true" name="ParentLedgerName" [(ngModel)]="LedgerDetail.ParentLedgerName"
                        #ParentLedgerName="ngModel" />
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label">Ledger Name<span class="important">*</span></label>
                    <input type="text" class="form-control" name="LedgerName" [(ngModel)]="LedgerDetail.LedgerName" #LedgerName="ngModel" required
                    />
                    <div class="error-message">
                        <div *ngIf="LedgerName.errors && frmLedgerEntry.submitted">
                            <div *ngIf="LedgerName.errors?.required">
                                Ledger Name is required
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Account Type<span class="important">*</span></label>
                    <select-guru [dropdownParent]="'mdLedgerEntry'" [data]="AccountData" [placeholder]="'::SELECT::'" name="AccountSysID" [(ngModel)]="LedgerDetail.AccountSysID"
                        #AccountSysID="ngModel" required></select-guru>
                    <div class="error-message">
                        <div *ngIf="AccountSysID.errors && frmLedgerEntry.submitted">
                            <div *ngIf="AccountSysID.errors?.required">
                                Account Type is required
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Allow SubLedger</label>
                    <div>
                        <p-checkbox binary="true" name="IsAllowSubLedger" [(ngModel)]="LedgerDetail.IsAllowSubLedger" #IsAllowSubLedger="ngModel"></p-checkbox>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Credit</label>
                    <input type="number" class="form-control" name="Credit" [(ngModel)]="LedgerDetail.Credit" #Credit="ngModel" />
                    <div class="error-message"></div>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Debit</label>
                    <input type="number" class="form-control" name="Debit" [(ngModel)]="LedgerDetail.Debit" #Debit="ngModel" />
                    <div class="error-message"></div>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Tax Type</label>
                    <select-guru [dropdownParent]="'mdLedgerEntry'" [data]="TaxData" [placeholder]="'::SELECT::'" name="TaxSysID" [(ngModel)]="LedgerDetail.TaxSysID"
                        #TaxSysID="ngModel"></select-guru>
                </div>
                <div class="form-group col-md-3">
                    <label class="control-label">Tax Percentage</label>
                    <input type="text" class="form-control" name="TaxPercentage" [(ngModel)]="LedgerDetail.TaxPercentage" #TaxPercentage="ngModel"
                    />
                </div>
            </div>
        </modal-body>
        <modal-footer>
            <button class="btn btn-success" name="btnSave" type="submit">Save</button>
            <button type="button" name="btnCloseEntry" class="btn btn-danger" (click)="btnCancel_click(); mdEntry.close();">Close</button>
        </modal-footer>
    </form>
</modal>